<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>宋萌的个人简历</title>
    <link rel="stylesheet" href="./main.css">
    <link rel="stylesheet" href="loading.css">
    <script src="//at.alicdn.com/t/font_632493_q0t4nv3irmwe9udi.js"></script>
    <style type="text/css">
        .icon {
           width: 1em; height: 1em;
           vertical-align: -0.15em;
           fill: currentColor;
           overflow: hidden;
        }
        .loading-page{
            display: none;
            position: fixed;
            background: #efefef;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            
            justify-content: center;
            align-items: center;
        }
        .loading-page.active{
            display: flex;
        }
    </style>
</head>
<body>
    <div id="loadingPage" class="loading-page active">
        <div class="loading"></div>
    </div>
    <div id="topNavBar" class="top-nav-bar">
        <div class="top-nav-bar-inner clearfix">
            <a href="#" class="logo">
                <span class="r">R</span><span class="esume">esume</span>
             </a> 
            <nav>
                <ul class="clearfix">
                    <li><a href="#siteAbout">关于</a></li>
                    <li><a href="#siteSkills">技能</a></li>
                    <li>
                        <a href="#siteProduction">作品</a>
                        <ul class="submenu">
                            <li>作品1</li>
                            <li>作品2</li>
                            <li>作品3</li>
                        </ul>
                    </li>
                    <li>
                        <a href="">博客</a>
                        <ul class="submenu">
                                <li>作品1</li>
                                <li>作品2</li>
                                <li>作品3</li>
                            </ul>
                    </li>
                    <li><a href="">日历</a></li>
                    <li><a href="">联系方式</a></li>
                    <li><a href="">其他</a></li>
                </ul>
            </nav>
         </div>
    </div>
    <div class="banner">
        <div class="marsk"></div>
    </div>
    <main>
        <div data-x id="siteAbout" class="usercard" style="margin-top:-380px;" >
            <div class="picANDtext clearfix">
                <div class="pic">
                    <img src="./img/pic.jpg" alt="头像">
                </div>
                <div class="text">
                    <div class="profile">
                        <span class="welcome">HELLO
                            <span class="triangle"></span>
                        </span>
                        <h1>宋 萌</h1>
                        <p>前端开发工程师</p>
                        <hr>
                        <dl>
                        <dt>年龄</dt>
                            <dd>23</dd>
                            <dt>所在城市</dt>
                            <dd>深圳</dd>
                            <dt>邮箱</dt>
                            <dd>352912788@qq.com</dd>
                            <dt>联系方式</dt>
                            <dd>15172545344</dd>
                            </dl>
                    </div>
                </div>
        </div>
        <footer class="media">
                <a href="https://github.com/NNNSSA1">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                </a>
                <a href="#">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                </a>
                <a href="#">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-twitter"></use>
                    </svg>
                </a>                                   
            </footer>           
        </div>
        <p class="downloadPDF"><a href="./resume.txt" class="download-resume" target="_blank" download>下载PDF简历</a></p>
        <p class="resume-text">你好，我叫宋萌，目前正在学习前端开发。
            <br>技能：HTML5, CSS3 ,Javascript,jQuery ,vue ,React</p>
        <section data-x id="siteSkills" class="skills">
            <h2>技能</h2>
            <ol class="clearfix">
                <li>
                    <h3>HTML 5 &amp; CSS 3</h3>
                    <div class="progress-bar">
                        <div class="progress" style="width:70%;"></div>
                    </div>
                </li>
                <li>
                    <h3>Javascript</h3>
                    <div class="progress-bar" >
                        <div class="progress" style="width:60%;"></div>
                    </div>  
                </li>
                <li>
                    <h3>jQuery</h3>
                    <div class="progress-bar">
                        <div class="progress" style="width:60%;"></div>
                    </div>
                </li>
                <li>
                    <h3>vue</h3>
                    <div class="progress-bar">
                        <div class="progress" style="width:50%;"></div>
                    </div>
                </li>
                <li>
                    <h3>React</h3>
                    <div class="progress-bar">
                        <div class="progress" style="width:50%;"></div>
                    </div>
                </li>
                <li>
                    <h3>Http</h3>
                    <div class="progress-bar">
                        <div class="progress" style="width:30%;"></div>
                    </div>
                </li>
            </ol>
        </section>
        <section  data-x id="siteProduction" class="production">
            <h2>作品集</h2>
            <nav>
                <ol class="clearfix">
                    <li id="productionAll">所有</li>
                    <li id="productionFrame">框架</li>
                    <li id="productionProtogenesis">原生Js &amp; 原生CSS</li>
                </ol>
                <div id="barCilck" class="production-bar state-1">
                    <div class="production-bar-inner"></div>        
                </div>
            </nav>
            <script>
                productionAll.onclick=function(){
                    barCilck.className = "production-bar state-1"
                }
                productionFrame.onclick=function(){
                    barCilck.className = "production-bar state-2"
                }
                productionProtogenesis.onclick=function(){
                    barCilck.className = "production-bar state-3"
                }
            </script>
            <div class="works" style="height: 597px;">
                <div class="big" style="top: 0; left: 0;">
                    <img src="./img/big.jpg"  alt="production">
                </div>
                <div class="small" style="top: 0;left: 627px;">
                        <img src="./img/small1.jpg"  alt="production">
                </div>
                <div class="small" style="top: 298px; left: 627px;">
                        <img src="./img/small2.jpg" alt="production">
                </div>
            </div>
        </section>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.2.0/Tween.min.js"></script>
    <script>
        var loadingPage = document.getElementById('loadingPage')
        setTimeout(function() {
            loadingPage.classList.remove('active')
        }, 1000)


        let specialTags = document.querySelectorAll('[data-x]')
        for(let i = 0;i<specialTags.length;i++){
            specialTags[i].classList.add('offset')
        }
        setTimeout(function(){
            find()
        }, 1000);
       
        window.onscroll = function(){
            if(window.scrollY > 0){
                topNavBar.classList.add('sticky')
            }else{
                topNavBar.classList.remove('sticky')
            }
            find()   
        }

        function find(){
                let specialTags = document.querySelectorAll('[data-x]')
                let minindex = 0
                for(let i = 1;i<specialTags.length; i++){
                    if(Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minindex].offsetTop - window.scrollY) ){
                        minindex = i 
                    }
                }
                //minindex就是距离窗口最近的元素
                specialTags[minindex].classList.remove('offset')
                for(let i = 0;i<specialTags.length; i++){
                    specialTags[i].classList.remove('active')
                }
                    specialTags[minindex].classList.add('active')
                let id = specialTags[minindex].id
                let a = document.querySelector('a[href="#'+ id +'"]')
                let li = a.parentNode
                let brotherAndMe = li.parentNode.children
                for(let i = 0; i<brotherAndMe.length;i++){
                    brotherAndMe[i].classList.remove('highlight')
                }
                    li.classList.add('highlight')
            }

        let liTags = document.querySelectorAll('nav>ul>li')
            for(let i = 0; i< liTags.length ;i++){
                liTags[i].onmouseenter = function(x){
                  x.currentTarget.classList.add('active')   //target 指的是用户操作的元素，currentTarget指的是用户监听的元素
                }
                liTags[i].onmouseleave = function(x){
                  x.currentTarget.classList.remove('active')
                }
            }
        let aTags = document.querySelectorAll("nav>ul>li>a")
                    // Setup the animation loop.
            function animate(time) {
                requestAnimationFrame(animate);
                TWEEN.update(time);
            }
            requestAnimationFrame(animate);

            for(let i = 0 ;i < aTags.length ; i++){
                aTags[i].onclick = function(x){
                    x.preventDefault()
                    let a = x.currentTarget                 //target 指的是用户操作的元素，currentTarget指的是用户监听的元素
                    let href = a.getAttribute('href')       //只是获取到了href的值'#...'
                    let element = document.querySelector(href)    //这一行就获取到了那个值的元素
                    let top = element.offsetTop         //获取元素到页面顶部的高度

                    // let n = 50  移动的次数
                    // let t = 500/n  多少时间动一次
                    let currentTop = window.scrollY  //当前用户的的高度
                    let targetTop = top-80      //目标距离
                    let s = targetTop - currentTop     //我们所要移动的距离
                    let t = Math.abs((s/100)*300)         //根据距离的增长时间增加(绝对值)
                    if(t>800){t = 800}
                    // let distance = (targetTop - currentTop )/n      我们所要移动到的距离(每次移动)                          
                    var coords = {y: currentTop}; 
                    var tween = new TWEEN.Tween(coords) 
                            .to({y: targetTop},t) 
                            .easing(TWEEN.Easing.Quadratic.In) 
                            .onUpdate(function() { 
                                window.scrollTo(0,coords.y)
                            })
                            .start();      
                }
            }
    </script>
</body>
</html>
